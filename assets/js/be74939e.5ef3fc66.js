"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8615],{6105:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>h});var t=r(4848),s=r(8453);const o={},c=void 0,i={id:"jh/getPerson/getPersonByUser",title:"getPersonByUser",description:"\u0110\u1ec3 s\u1eeda h\xe0m getAccount trong AccountResource.java \u0111\u1ec3 sau khi g\u1ecdi getUserWithAuthorities th\xec th\xeam th\xf4ng tin v\u1ec1 Person, b\u1ea1n c\xf3 th\u1ec3 th\u1ef1c hi\u1ec7n nh\u01b0 sau:",source:"@site/docs/jh/getPerson/getPersonByUser.md",sourceDirName:"jh/getPerson",slug:"/jh/getPerson/getPersonByUser",permalink:"/doc/docs/jh/getPerson/getPersonByUser",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/jh/getPerson/getPersonByUser.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"paragraph-update",permalink:"/doc/docs/jh/editorjs/paragraph-update"},next:{title:"i18n",permalink:"/doc/docs/jh/i18n/"}},p={},h=[];function a(e){const n={code:"code",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\u0110\u1ec3 s\u1eeda h\xe0m getAccount trong AccountResource.java \u0111\u1ec3 sau khi g\u1ecdi getUserWithAuthorities th\xec th\xeam th\xf4ng tin v\u1ec1 Person, b\u1ea1n c\xf3 th\u1ec3 th\u1ef1c hi\u1ec7n nh\u01b0 sau:"}),"\n",(0,t.jsx)(n.p,{children:"Th\xeam ph\u01b0\u01a1ng th\u1ee9c trong PersonRepository \u0111\u1ec3 t\xecm Person theo User:\nGi\u1ea3 s\u1eed PersonRepository \u0111\xe3 c\xf3 ph\u01b0\u01a1ng th\u1ee9c findOneByUserId(Long userId) \u0111\u1ec3 t\xecm Person theo userId. N\u1ebfu ch\u01b0a c\xf3, b\u1ea1n c\u1ea7n th\xeam ph\u01b0\u01a1ng th\u1ee9c n\xe0y."}),"\n",(0,t.jsx)(n.p,{children:"C\u1eadp nh\u1eadt getAccount trong AccountResource.java:"}),"\n",(0,t.jsx)(n.p,{children:"Sau khi l\u1ea5y AdminUserDTO t\u1eeb getUserWithAuthorities, b\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng PersonRepository \u0111\u1ec3 t\xecm Person t\u01b0\u01a1ng \u1ee9ng v\u1edbi User.\nSau \u0111\xf3, chuy\u1ec3n \u0111\u1ed5i Person th\xe0nh PersonDTO v\xe0 th\xeam v\xe0o AdminUserDTO.\nD\u01b0\u1edbi \u0111\xe2y l\xe0 c\xe1ch b\u1ea1n c\xf3 th\u1ec3 s\u1eeda h\xe0m getAccount:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@RestController\n@RequestMapping("/api")\npublic class AccountResource {\n\n    private final UserService userService;\n    private final PersonRepository personRepository;\n    private final PersonMapper personMapper;\n\n    public AccountResource(UserService userService, PersonRepository personRepository, PersonMapper personMapper) {\n        this.userService = userService;\n        this.personRepository = personRepository;\n        this.personMapper = personMapper;\n    }\n\n    @GetMapping("/account")\n    public AdminUserDTO getAccount() {\n        return userService\n            .getUserWithAuthorities()\n            .map(user -> {\n                AdminUserDTO adminUserDTO = new AdminUserDTO(user);\n                \n                // T\xecm Person t\u01b0\u01a1ng \u1ee9ng v\u1edbi User\n                Optional<Person> personOpt = personRepository.findOneByUserId(user.getId());\n                personOpt.ifPresent(person -> {\n                    PersonDTO personDTO = personMapper.toDto(person);\n                    // Th\xeam th\xf4ng tin Person v\xe0o AdminUserDTO\n                    adminUserDTO.setPerson(personDTO);\n                });\n                \n                return adminUserDTO;\n            })\n            .orElseThrow(() -> new AccountResourceException("User could not be found"));\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Gi\u1ea3i th\xedch:\nPersonRepository: \u0110\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 t\xecm Person theo userId.\nPersonMapper: \u0110\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 chuy\u1ec3n \u0111\u1ed5i Person th\xe0nh PersonDTO.\nAdminUserDTO: \u0110\u01b0\u1ee3c m\u1edf r\u1ed9ng \u0111\u1ec3 ch\u1ee9a th\xeam th\xf4ng tin PersonDTO.\nN\u1ebfu AdminUserDTO ch\u01b0a c\xf3 thu\u1ed9c t\xednh person, b\u1ea1n c\u1ea7n b\u1ed5 sung th\xeam thu\u1ed9c t\xednh n\xe0y trong AdminUserDTO v\xe0 t\u1ea1o c\xe1c ph\u01b0\u01a1ng th\u1ee9c getter v\xe0 setter t\u01b0\u01a1ng \u1ee9ng."}),"\n",(0,t.jsx)(n.p,{children:"V\xed d\u1ee5 c\u1eadp nh\u1eadt AdminUserDTO:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public class AdminUserDTO {\n\n    // C\xe1c thu\u1ed9c t\xednh kh\xe1c...\n    \n    private PersonDTO person;\n\n    // Constructor, getter v\xe0 setter cho person\n\n    public PersonDTO getPerson() {\n        return person;\n    }\n\n    public void setPerson(PersonDTO person) {\n        this.person = person;\n    }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"V\u1edbi nh\u1eefng c\u1eadp nh\u1eadt n\xe0y, h\xe0m getAccount s\u1ebd tr\u1ea3 v\u1ec1 th\xf4ng tin User k\xe8m theo th\xf4ng tin Person t\u01b0\u01a1ng \u1ee9ng."})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>i});var t=r(6540);const s={},o=t.createContext(s);function c(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);